<!DOCTYPE html>
<html lang="en" xml:lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:ice="http://xmlns.jcp.org/jsf/composite/components"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">

<ui:composition template="/templates/public.xhtml">
    <f:metadata>
        <f:viewParam name="thingID" value="#{thingBean.thingID}" />
    </f:metadata>
    <ui:define name="content">

        <h2><span class="fa fa-lock"> </span> A Secret Thing</h2>

        <blockquote><p>${thingBean.thing.secretText}</p></blockquote>

        <p><h:outputText value="#{thingBean.thing.count}" /></p>

        <p><p:commandButton action="#{thingBean.incrementThing}" value="Increment" update="@form" /></p>

    </ui:define>

    <ui:param name="hasSidebar" value="true" />
    <ui:define name="sidebar">
        <ice:sidebar>
            <h2>My things</h2>
            <ul>
            <ui:repeat value="#{thingBean.getThings()}" var="thing">
                <h:link outcome="thing" value="Secret thing belonging to me">
                    <f:param name="thingID" value="${thing.id}" />
                </h:link>
            </ui:repeat>
            </ul>
        </ice:sidebar>
    </ui:define>
</ui:composition>
</html>